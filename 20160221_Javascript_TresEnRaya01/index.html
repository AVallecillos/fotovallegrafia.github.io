<!doctype html>
<html>
<head>
<meta charset="UTF-8">
<title>Tres en Raya</title>
<script>
	var mapa = [0,0,0,0,0,0,0,0,0]; //array
	var jugador = 1;
	
	function dibujar(){
		document.getElementById("chivato").innerHTML = mapa;
		for(i = 0; i < 9; i++) {
			if(mapa[i] == 0) document.getElementById("c"+i).style="background-color:white";
			if(mapa[i] == 1) document.getElementById("c"+i).style="background-color:red";
			if(mapa[i] == 2) document.getElementById("c"+i).style="background-color:blue";
		}
	}
	function pulsarcelda(celda){
		if(mapa[celda]==0) {
			if (jugador == 1) {
				mapa[celda] = 1;
				jugador = 2;
			} else {
				mapa[celda] = 2;
				jugador = 1;
			}
		} else {
			window.alert("No puedes pulsar una celda coloreada");
		}
		dibujar();
		var r = ganador();
		switch(r){
			case 0:
				break;
			case 1:
				window.alert("¡Ganó el rojo!");
				break;
			case 2:
				window.alert("¡Ganó el azul!");
				break;
			case 3:
				window.alert("¡Empate!");
				break;
		}
		//document.getElementById("c"+celda).style="background-color:red";
		//window.alert(celda);
	}
	function ganador(){
		var numEspacios = 0;
		for(i = 0; i < 9; i++){
			if(mapa[i] == 0) numEspacios++;
		}
		
		if(mapa[0] == mapa[1] && mapa[1] == mapa[2] && mapa[2] != 0) return mapa[2];
		if(mapa[3] == mapa[4] && mapa[4] == mapa[5] && mapa[5] != 0) return mapa[5];
		if(mapa[6] == mapa[7] && mapa[7] == mapa[8] && mapa[8] != 0) return mapa[8];
		
		if(mapa[0] == mapa[3] && mapa[3] == mapa[6] && mapa[6] != 0) return mapa[0];
		if(mapa[1] == mapa[4] && mapa[4] == mapa[7] && mapa[7] != 0) return mapa[7];
		if(mapa[2] == mapa[5] && mapa[5] == mapa[8] && mapa[8] != 0) return mapa[8];
		
		if(mapa[0] == mapa[4] && mapa[4] == mapa[8] && mapa[8] != 0) return mapa[8];
		if(mapa[2] == mapa[4] && mapa[4] == mapa[6] && mapa[6] != 0) return mapa[6];
		
		if(numEspacios>0){
			return 0;
		} else {
			return 3;
		}
	}
</script>
</head>

<body style="background-color:black" text="white">
	<p align="center">TRES EN RAYA</p>
	<p align="center">El jugador 1 marca las casillas en rojo y el jugador 2 en azul</p>
	<table border="0" align="center">
		<tr>
		<td width=100 height=100 id="c0" onclick="pulsarcelda(0)" style="background-color:white"></td>
		<td width=100 height=100 id="c1" onclick="pulsarcelda(1)" style="background-color:white"></td>
		<td width=100 height=100 id="c2" onclick="pulsarcelda(2)" style="background-color:white"></td>
		</tr>
		<tr>
		<td width=100 height=100 id="c3" onclick="pulsarcelda(3)" style="background-color:white"></td>
		<td width=100 height=100 id="c4" onclick="pulsarcelda(4)" style="background-color:white"></td>
		<td width=100 height=100 id="c5" onclick="pulsarcelda(5)" style="background-color:white"></td>
		</tr>
		<tr>
		<td width=100 height=100 id="c6" onclick="pulsarcelda(6)" style="background-color:white"></td>
		<td width=100 height=100 id="c7" onclick="pulsarcelda(7)" style="background-color:white"></td>
		<td width=100 height=100 id="c8" onclick="pulsarcelda(8)" style="background-color:white"></td>
		</tr>
	</table>
	
	<p id="chivato" align="center">0,0,0,0,0,0,0,0,0</p>
	
</body>
</html>